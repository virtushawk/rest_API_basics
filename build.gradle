plugins {
    id 'java'
    id "org.flywaydb.flyway" version "7.11.3"
}

allprojects {
    plugins.withType(JavaPlugin) {
        dependencies {
            compileOnly group: 'org.projectlombok', name: 'lombok', version: '1.18.20'
            annotationProcessor 'org.projectlombok:lombok:1.18.20'
            implementation group: 'org.springframework.boot', name: 'spring-boot-starter-hateoas', version: '2.5.1'
            testImplementation group: 'org.springframework.boot', name: 'spring-boot-starter-test', version: '2.5.1'
            implementation group: 'org.springframework.boot', name: 'spring-boot-starter-validation', version: '2.5.1'
            implementation group: 'org.springframework.boot', name: 'spring-boot-starter-data-jpa', version: '2.5.1'
            implementation group: 'org.springframework.boot', name: 'spring-boot-starter-actuator', version: '2.5.1'
            implementation group: 'de.codecentric', name: 'spring-boot-admin-starter-server', version: '2.4.3'
            implementation group: 'de.codecentric', name: 'spring-boot-admin-starter-client', version: '2.4.3'

            test {
                useJUnitPlatform()
            }

            repositories {
                mavenCentral()
            }
        }
    }
}

flyway {
    flyway.user = 'root'
    flyway.password = '2745839'
    flyway.url = 'jdbc:mysql://localhost:3306/certificate'
    flyway.locations = 'database/db.migration'
}